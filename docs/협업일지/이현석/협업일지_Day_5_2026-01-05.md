---
layout: default
title: "협업일지 Day 5 (2026-01-05) - 코드잇 AI 4기 4팀 이현석"
description: "협업일지 Day 5 (2026-01-05) - 코드잇 AI 4기 4팀 이현석"
date: 2026-01-05
author: "이현석"
cache-control: no-cache
expires: 0
pragma: no-cache
---

# 일일 협업일지 - Day 5 (2026-01-05)

## [1] 기본 정보
**날짜**: 2026-01-05
**이름**: 이현석
**팀명**: 코드잇 AI 4기 4팀

---

## [2] 오늘 맡은 역할 및 구체적인 작업 내용
**답변**:
```
이미지 생성 모듈 코드 품질 개선 및 백엔드 통합 레이어 구현
- generation.py 중복 저장 로직 제거 (디스크 공간 최적화)
- 스타일별 네거티브 프롬프트 분리 (Anime 품질 향상)
- VAE 클래스 변수 캐싱으로 멀티 모델 로딩 속도 개선
- generator.py 백엔드 통합 인터페이스 구현 완료
- 생성 속도 문서 수정 (실제 측정값 15-20초 반영)
```

---

## [3] 오늘 작업 완료도 체크 (하나만 체크)
- [ ] 0% (시작 못함)
- [ ] 25% (시작은 했지만 진척 없음)
- [ ] 50% (진행 중, 절반 이하)
- [ ] 75% (거의 완료됨)
- [x] 100% (완료 및 점검까지 완료)

**간단한 근거**:
```
코드 품질 개선 완료, 백엔드 통합 레이어 구현 완료
generator.py를 통해 백엔드 팀이 간단히 함수 호출만으로 이미지 생성 가능
Text Generator → Image Generator → 저장 → 경로 반환 흐름 완성
```

---

## [4] 오늘 협업 중 제안하거나 피드백한 내용이 있다면?
**답변**:
```
백엔드 팀 통합 방식 논의:
- 백엔드가 workflow를 직접 구성하는 대신 generator.py의 함수만 호출하도록 제안
- generate_and_save_image() 함수로 Text Generator 출력 → 이미지 생성 → 저장 → 경로 반환
- business_id 기반 폴더 구조로 사용자별 이미지 관리 용이
```

---

## [5] 오늘 분석/실험 중 얻은 인사이트나 발견한 문제점은?
**답변**:
```
주요 발견:
- 중복 저장 문제: cache_dir와 save_pretrained 동시 사용 시 디스크 낭비
- 스타일별 네거티브 충돌: 공통 네거티브에 "anime style" 포함 시 Anime 생성 방해
- VAE 중복 로드: 멀티 모델 전환 시마다 VAE 재로드로 시간 낭비
- 실제 생성 속도: 문서상 60-80초였으나 실측 15-20초 (L4 GPU 기준)

기술적 해결:
- save_pretrained만 사용하여 단일 경로 저장 방식으로 변경
- 스타일별 STYLE_NEGATIVE_PROMPTS 딕셔너리로 분리
- 클래스 변수 _vae_cache로 VAE 한 번만 로드 후 재사용
- get_negative_prompt(style) 메서드로 자동 선택
```

---

## [6] 일정 지연이나 협업 중 어려웠던 점이 있다면?
**답변**:
```
백엔드 통합 인터페이스 설계 재조정:
- 초기: workflow를 백엔드가 직접 구성하도록 계획
- 재설계: generator.py에서 workflow를 내부적으로 처리
- Text Generator의 출력 형식과 연동되도록 함수 파라미터 재설계

스토리지 모듈 미구현 상태:
- 신승목님의 스토리지 모듈이 아직 없어 임시로 로컬 저장 구현
- storage/generated_images/ 경로 사용
- 추후 S3/클라우드 스토리지 연동 가능하도록 설계
```

---

## [7] 오늘 발표 준비나 커뮤니케이션에서 기여한 부분은?
**답변**:
```
없음
```

---

## [8] 내일 목표 / 할 일
**답변**:
```
1. generator.py 실제 테스트 (Text Generator 연동 대기)
2. 전처리 노드 구현 (BackgroundRemovalNode, ResizeNode)
3. 후처리 노드 구현 (TextOverlayNode, ImageCompressionNode)
4. 백엔드 팀과 API 엔드포인트 통합 테스트
5. 프롬프트 최적화 (배현석님 TextGenerator와 연동)
```

---

## [9] 추가 기록 (선택사항)

```
수정한 파일:
- config.py
  - NEGATIVE_PROMPT_BASE: 공통 품질 설정
  - STYLE_NEGATIVE_PROMPTS: ultra_realistic, semi_realistic, anime 분리
  - get_negative_prompt(style) 메서드 추가

- nodes/generation.py
  - _vae_cache 클래스 변수로 VAE 캐싱
  - 중복 저장 로직 제거 (cache_dir 제거, save_pretrained만 사용)
  - style 파라미터 지원 추가
  - negative_prompt 자동 선택 로직

- generator.py (신규 작성)
  - generate_and_save_image(): 메인 진입점
  - generate_batch_images(): 배치 생성
  - 저장 경로: storage/generated_images/{business_id}/{filename}
  - 반환값: success, image_path, relative_path, width, height, style, seed, generation_time, error

- private_doc/Image_README.md
  - 생성 속도 수정: 60-80초 → 15-20초 (실측값 반영)

백엔드 통합 예시:
```python
from src.generation.image_generation.generator import generate_and_save_image

result = generate_and_save_image(
    prompt=text_gen_output["prompt"],  # Text Generator 출력
    style="ultra_realistic",
    aspect_ratio="16:9",
    industry="cafe",
    business_id="user123"
)

# result = {
#     "success": True,
#     "image_path": "...",
#     "relative_path": "generated_images/user123/20260105_...",
#     "width": 1344,
#     "height": 768,
#     "generation_time": 15.2
# }
```

다음 단계:
- 전처리/후처리 노드 구현
- Text Generator 연동 테스트
- API 엔드포인트 통합
- 스토리지 모듈 연동 (신승목님)
```

---

**작성 시간**: 5분
