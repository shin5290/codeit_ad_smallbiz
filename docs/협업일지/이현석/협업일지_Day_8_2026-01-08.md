---
layout: default
title: "협업일지 Day 8 (2026-01-08) - 코드잇 AI 4기 4팀 이현석"
description: "협업일지 Day 8 (2026-01-08) - 코드잇 AI 4기 4팀 이현석"
date: 2026-01-08
author: "이현석"
cache-control: no-cache
expires: 0
pragma: no-cache
---

# 일일 협업일지 - Day 8 (2026-01-08)

## [1] 기본 정보
**날짜**: 2026-01-08
**이름**: 이현석
**팀명**: 코드잇 AI 4기 4팀

---

## [2] 오늘 맡은 역할 및 구체적인 작업 내용
**답변**:
```
VM 배포 환경 구현 및 이미지 저장 경로 개선
- VM 공용 스토리지 경로 설정 (/opt/ai-models/sdxl)
- 모델 다운로드 스크립트 작성 (download_models.py)
- nodes/text2image.py, controlnet.py 모델 경로 수정 (환경변수 기반)
- PROJECT_ROOT 자동 탐지 기능 구현
- business_id 파라미터 제거
- 해시 기반 파일명 생성으로 변경 (SHA256)
- 이미지 저장 경로 구조 통일 (T2I/I2I 동일 구조)
- generate_and_save_image, generate_with_controlnet 함수 주석 및 리턴값 정리
```

---

## [3] 오늘 작업 완료도 체크 (하나만 체크)
- [ ] 0% (시작 못함)
- [ ] 25% (시작은 했지만 진척 없음)
- [ ] 50% (진행 중, 절반 이하)
- [x] 75% (거의 완료됨)
- [ ] 100% (완료 및 점검까지 완료)

**간단한 근거**:
```
VM 환경 구성 및 경로 관리 개선 완료
- 모델 경로 및 이미지 저장 경로 구조 완료
- 실제 VM에서 모델 다운로드 테스트는 내일 진행 예정
- 백엔드 API 인터페이스 정리 완료
```

---

## [4] 오늘 협업 중 제안하거나 피드백한 내용이 있다면?
**답변**:
```
이미지 모델의 종류 및 이미지 생성 시간에 관한 논의
- 이미지 생성 모델이 총 3개 + vae + ControlNet의 존재로 현재 L4 VRAM으로 모든 모델을 올릴 수 없음
- 그로 인해 모델이 이미지를 생성한 후 auto_unload를 활성화 하였으나 cold start로 인해 이미지 생성 시간이 길어지는 문제
```

---

## [5] 오늘 분석/실험 중 얻은 인사이트나 발견한 문제점은?
**답변**:
```
주요 발견:

1. 멀티 유저 환경에서의 경로 관리
   - 하드코딩된 경로 (/home/codeit_ad_smallbiz)는 다른 사용자 환경에서 동작 불가
   - 상대 경로는 실행 위치에 따라 달라지는 문제
   - PROJECT_ROOT 자동 탐지로 해결 (src/ 디렉토리 기준)

2. 이미지 저장 경로 구조 문제
   - business_id 파라미터는 프로젝트에 불필요
   - 해시 기반 파일명으로 중복 방지
   - T2I와 I2I의 저장 구조 불일치 → 통일 필요

3. 함수 인터페이스 일관성
   - generate_and_save_image와 generate_with_controlnet의 리턴값 불일치
   - 주석과 실제 파라미터 불일치
   - 통일된 인터페이스로 백엔드 연동 단순화

4. VRAM 제약
   - 이미지 생성 모델 3개 + VAE + ControlNet → L4 VRAM 부족
   - auto_unload 활성화로 해결했으나 cold start 시간 증가

기술적 해결:
- _find_project_root() 함수로 프로젝트 루트 자동 탐지
- 해시 기반 파일명: {해시앞2자리}/{해시전체}.jpg
- 환경변수 MODELS_DIR로 모델 경로 오버라이드 가능
- generate_and_save_image() 하나로 T2I/I2I 자동 분기
```

---

## [6] 일정 지연이나 협업 중 어려웠던 점이 있다면?
**답변**:
```
없음
```

---

## [7] 오늘 발표 준비나 커뮤니케이션에서 기여한 부분은?
**답변**:
```
없음
```

---

## [8] 내일 목표 / 할 일
**답변**:
```
1. T2I 후처리 노드 구현 (텍스트 오버레이, 압축)
2. 백엔드 팀과 API 통합 작업
3. 실제 비즈니스 데이터 테스트
```

---

## [9] 추가 기록 (선택사항)

```
신규 작성한 파일:
1. download_models.py - SDXL 모델 자동 다운로드 스크립트

주요 수정 파일:
1. generator.py
   - PROJECT_ROOT 자동 탐지 기능 추가
   - business_id 파라미터 제거
   - 해시 기반 파일명 생성 (SHA256)
   - T2I/I2I 저장 경로 구조 통일
   - 함수 주석 및 리턴값 정리

2. nodes/text2image.py, nodes/controlnet.py
   - 환경변수 기반 모델 경로 설정 (MODELS_DIR)
   - /opt/ai-models/sdxl 기본 경로

최종 저장 구조:
- 모델: /opt/ai-models/sdxl/{model_name}/
- 이미지: {PROJECT_ROOT}/data/generated/{해시앞2자리}/{해시전체}.jpg
```

---

**작성 시간**: 5분
