---
layout: default
title: "협업일지 Day 14 (2026-01-16) - 코드잇 AI 4기 4팀 이현석"
description: "협업일지 Day 14 (2026-01-16) - 코드잇 AI 4기 4팀 이현석"
date: 2026-01-16
author: "이현석"
cache-control: no-cache
expires: 0
pragma: no-cache
---

# 일일 협업일지 - Day 14 (2026-01-16)

## [1] 기본 정보
**날짜**: 2026-01-16
**이름**: 이현석
**팀명**: 코드잇 AI 4기 4팀

---

## [2] 오늘 맡은 역할 및 구체적인 작업 내용
**답변**:
```
이미지 생성 모델 전환: SDXL → Z-Image Turbo (ZIT)
- SDXL 관련 파일 백업 (generator_sdxl.py, text2image_sdxl.py, prompt_manager_sdxl.py 등)
- Z-Image Turbo 다운로드 스크립트 작성 (download_model_zit.py)
- text2image.py ZIT 전환 (ZImagePipeline 사용)
- image2image.py ZIT 전환 (ZImageImg2ImgPipeline 사용)
- prompt 시스템 ZIT 최적화
  - negative_prompt 제거 (ZIT는 CFG 미사용)
  - T5 기반 텍스트 인코더 (CLIP 77 토큰 제한 없음)
  - 8 steps 기본값 설정
- generator.py 대규모 리팩토링 (477줄 → 간소화)
- ZIT 테스트 코드 수정 (test_generate.py)

GPU 메모리 최적화 시도 (GCP L4 23GB VRAM)
- enable_model_cpu_offload() 시도 → Swap 메모리 증가 문제 발견
- low_cpu_mem_usage=True 설정 추가
- 파이프라인 캐싱 로직 수정
- 모델 로딩 방식 변경: CPU offload → CUDA 직접 로드
- 모델 loss 저장 방식 변경
```

---

## [3] 오늘 작업 완료도 체크 (하나만 체크)
- [ ] 0% (시작 못함)
- [ ] 25% (시작은 했지만 진척 없음)
- [x] 50% (진행 중, 절반 이하)
- [ ] 75% (거의 완료됨)
- [ ] 100% (완료 및 점검까지 완료)

**간단한 근거**:
```
- ZIT 모델 전환 완료, 백업 완료
- GPU 메모리 최적화 진행 중 (여러 시도)
- 테스트 완료되지 않음 (메모리 이슈 해결 필요)
```

---

## [4] 오늘 협업 중 제안하거나 피드백한 내용이 있다면?
**답변**:
```
없음
```

---

## [5] 오늘 분석/실험 중 얻은 인사이트나 발견한 문제점은?
**답변**:
```
1. Z-Image Turbo 특징
   - 모델 크기: 6B 파라미터 (bfloat16 → 20.5GB)
   - SDXL 대비 5배 빠름 (8 steps vs 40 steps)
   - T5 텍스트 인코더 → CLIP 77 토큰 제한 없음
   - CFG 미사용 → negative_prompt 불필요
   - LoRA 지원 (anime, semi_realistic)

2. GPU 메모리 관리 이슈
   - GCP L4: 23GB VRAM (ZIT 20.5GB 사용)
   - enable_model_cpu_offload() 문제:
     * 의도: VAE를 CPU로 오프로드하여 VRAM 절약
     * 실제: Swap 메모리 지속 증가 (메모리 누수 의심)
   - 해결 시도:
     * low_cpu_mem_usage=True 추가
     * CPU offload 제거, CUDA 직접 로드
     * 파이프라인 캐싱 로직 개선
     * 모델 loss 저장 방식 변경

3. 모델 전환 작업량
   - 12개 파일 수정 (+2732줄, -1465줄)
   - SDXL 백업 파일 4개 생성
   - prompt 시스템 대규모 리팩토링
   - generator.py 477줄 간소화
```

---

## [6] 일정 지연이나 협업 중 어려웠던 점이 있다면?
**답변**:
```
GPU 메모리 최적화 이슈
- enable_model_cpu_offload()의 Swap 메모리 증가 문제로 여러 번 수정
- GCP L4 23GB VRAM에 20.5GB 모델 로드 → 메모리 여유 2.5GB
- 반복 생성 시 안정성 확보 필요
```

---

## [7] 오늘 발표 준비나 커뮤니케이션에서 기여한 부분은?
**답변**:
```
없음
```

---

## [8] 내일 목표 / 할 일
**답변**:
```
1. GPU 메모리 최적화 완료 및 안정화
2. ZIT 테스트 및 성능 검증
3. 백엔드 연동 준비
```

---

## [9] 추가 기록 (선택사항)

```
주요 작업 파일:
1. 신규 파일
   - src/generation/image_generation/download_model_zit.py (133줄)
   - src/generation/image_generation/generator_sdxl.py (556줄 백업)
   - src/generation/image_generation/nodes/text2image_sdxl.py (백업)
   - src/generation/image_generation/prompt/prompt_manager_sdxl.py (592줄 백업)
   - src/generation/image_generation/prompt/prompt_templates_sdxl.py (596줄 백업)
   - src/generation/image_generation/prompt/style_router_sdxl.py (161줄 백업)

2. ZIT 전환 수정
   - src/generation/image_generation/generator.py (대규모 간소화)
   - src/generation/image_generation/nodes/text2image.py (ZImagePipeline)
   - src/generation/image_generation/nodes/image2image.py (ZImageImg2ImgPipeline)
   - src/generation/image_generation/prompt/prompt_manager.py (ZIT 최적화)
   - src/generation/image_generation/prompt/prompt_templates.py (CFG 제거)
   - src/generation/image_generation/prompt/style_router.py (ZIT 스타일)

3. 테스트
   - src/generation/image_generation/test_generate.py (ZIT 테스트)

메모리 최적화 히스토리:
- 14:42 CPU offload 적용
- 14:47 I2I 파이프라인 캐시 수정
- 15:36 low_cpu_mem_usage 추가, Swap 사용량 확인
- 16:11 CPU offload → CUDA 직접 로드 변경
- 16:48 모델 로딩 로직 리팩토링
- 17:34 모델 loss 저장 방식 변경
```

---

**작성 시간**: 3분
