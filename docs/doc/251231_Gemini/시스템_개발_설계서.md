# 시스템 개발 설계서
- Gemini를 기반으로 작성되었음을 알립니다.

## 1. 기술 스택 (Tech Stack)
- **Frontend:** SvelteKit, Tailwind CSS, Axios
- **Backend:** FastAPI, SQLAlchemy, PyJWT
- **Database:** PostgreSQL 15
- **AI/ML:** OpenAI API(GPT-4), Diffusers(SDXL/Flux.1), PyTorch
- **Infra:** Docker, GCP Compute Engine, Vercel

## 2. API 엔드포인트 설계
### 2.1 인증 (Auth)
- `POST /api/signup`: 회원가입 (ID/PW 저장)
- `POST /api/login`: 로그인 (JWT 토큰 발급)

### 2.2 광고 생성 (Ad Generation)
- `POST /api/generate`: 광고 콘텐츠 생성 요청 (비동기 처리)
- `GET /api/status/{task_id}`: 이미지 생성 상태 확인 (Polling용)

### 2.3 이력 관리 (History)
- `GET /api/history`: 로그인 사용자의 과거 생성 내역 리스트
- `GET /api/chat-sessions`: 채팅 세션 목록 조회

## 3. 데이터베이스 스키마
### Table: `users` (회원 정보)
- `id` (PK), `login_id`, `password_hash`, `created_at`

### Table: `generation_history` (생성 기록)
- `id` (PK), `user_id` (FK), `input_text`, `output_url` (GCS URL), `output_copy` (광고 문구), `style_tag`, `created_at`

## 4. 프로젝트 구조 (Directory Structure)
project_root/
├── frontend/ # (이유노: Svelte 프로젝트) 
│ ├── src/ 
│ │ ├── lib/ # API 호출 함수, 공통 컴포넌트 
│ │ ├── routes/ # 페이지 경로 (+page.svelte) 
│ │ └── stores/ # 채팅 및 사용자 상태 관리 
│ └── static/ # 정적 파일 
├── backend/ # (진수경: FastAPI 프로젝트) 
│ ├── routes/ # API 경로 정의 
│ ├── services/ # 비즈니스 로직 및 AI 연동 
│ └── database/ # DB 모델 및 CRUD 
├── generation/ # (이현석, 배현석: AI 모델 파트) 
│ ├── image_gen.py # UnifiedImageGenerator 
│ └── prompt_gen.py # TextGenerator 
└── infra/ # (신승목: 인프라 파트)
├── docker-compose.yml 
└── data/db/ # DB 데이터 저장소 (Bind Mount)

## 5. 개발 가이드라인
- **Frontend:** 모든 API 요청은 `src/lib/api.ts`에서 통합 관리한다.
- **Backend:** CORS 미들웨어를 설정하여 Vercel 도메인의 접근을 허용한다.
- **Environment:** 비밀키, DB 접속 정보는 `.env` 파일에서 관리하며 Git에 포함하지 않는다.