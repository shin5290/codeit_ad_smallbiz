# 이미지 생성 시스템 - 발표 자료

> **팀 발표** 중 일부 파트

---

## 🎯 핵심 성과

**소상공인 광고 이미지 자동 생성 시스템**

| 지표 | Before (SDXL) | After (Z-Image Turbo) | 개선 |
|------|---------------|----------------------|------|
| 스토리지 | 99GB (3모델) | 21GB (1모델+LoRA) | **78%↓** |
| 메모리 | 40GB | 24GB | **40%↓** |
| 프롬프트 | 77토큰 | 512+토큰 | **6배↑** |

---

## 🔧 핵심 기술 문제 해결

### 1. 긴 광고 문구 표현 불가
- **문제**: CLIP 77토큰 제한으로 광고 문구 잘림
- **해결**: Z-Image Turbo (Qwen 2.5 LLM, 512+ 토큰)

### 2. 스토리지 과다 사용
- **문제**: 스타일별 전체 모델 3개 필요 (99GB)
- **해결**: 단일 베이스 모델 + LoRA 교체 (21GB)

### 3. 메모리 초과 (OOM)
- **문제**: T2I↔I2I 전환 시 중복 로딩 (40GB)
- **해결**: Transformer/VAE/Encoder 공유 캐시 (24GB)

### 4. 제품 배경 합성 메모리 제약
- **문제**: ControlNet 추가 시 OOM (23.5GB)
- **해결**: rembg 순차 실행 + 즉시 언로드 (21GB)

**핵심 전략**: 순차 실행 + 즉시 언로드 + 컴포넌트 재사용

---

## 🏗️ 시스템 아키텍처

### 노드 기반 설계

```
┌─────────────────────────────┐
│  Generator API              │  ← 사용자 인터페이스
├─────────────────────────────┤
│  ImageGenerationWorkflow    │  ← 노드 체인 실행
├─────────────────────────────┤
│  노드들 (처리 단위)          │
│  ├ PromptProcessorNode      │  한글→영어
│  ├ Text2ImageNode           │  이미지 생성
│  ├ Image2ImageNode          │  이미지 변형
│  ├ BackgroundRemovalNode    │  배경 제거
│  ├ BackgroundCompositeNode  │  합성
│  ├ GPTLayoutAnalyzerNode    │  자동 배치
│  ├ TextOverlayNode          │  텍스트
│  └ SaveImageNode            │  저장
├─────────────────────────────┤
│  Shared Cache               │  ← 메모리 최적화
└─────────────────────────────┘
```

**장점**: 노드 조합으로 다양한 워크플로우 구성 가능

---

## 🔄 주요 워크플로우

### 1. 기본 T2I (텍스트→이미지)
```
한글 입력 → 프롬프트 변환 → 이미지 생성 → 텍스트 오버레이 → 저장
```

### 2. I2I (이미지 변형)
```
참조 이미지 + 한글 입력 → I2I 생성 → 텍스트 오버레이 → 저장
```

### 3. 제품 배경 합성
```
제품 이미지 → 배경 제거 → AI 배경 생성 → GPT-4V 배치 결정 → 합성 → 저장
```

---

## 📊 구현 완료 기능

### 생성 모드
- ✅ Text2Image: 텍스트로 새 이미지 생성
- ✅ Image2Image: 기존 이미지 변형
- ✅ 제품 배경 합성: 제품 + AI 배경 자동 합성

### 자동화
- ✅ 한글→영어 프롬프트 자동 변환
- ✅ GPT-4V 기반 텍스트/제품 자동 배치
- ✅ 업종별 프롬프트 최적화 (cafe, restaurant, retail, service)

### 최적화
- ✅ 공유 캐시 시스템 (메모리 40% 절감)
- ✅ 순차 실행으로 OOM 방지
- ✅ L4 GPU (24GB VRAM) 안정 작동
- ✅ 해시 기반 중복 방지 저장

---

## 🎯 정량적 성과

| 항목 | 성과 |
|------|------|
| **스토리지 효율** | 99GB → 21GB (78% 절감) |
| **메모리 효율** | 40GB → 24GB (40% 절감) |
| **프롬프트 확장** | 77토큰 → 512+토큰 (6배 증가) |
| **스타일 전환** | 전체 재로딩 → LoRA 교체 (빠른 전환) |

---

**작성일**: 2026-01-27
**참고**: [결과보고서](./결과보고서_이미지생성시스템.md)
